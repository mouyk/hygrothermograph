C51 COMPILER V9.60.0.0   GPIO                                                              06/24/2023 15:11:54 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE GPIO
OBJECT MODULE PLACED IN .\output\gpio.obj
COMPILER INVOKED BY: D:\Keil_v5\C51\BIN\C51.EXE source\gpio.c LARGE OMF2 OPTIMIZE(8,SPEED) BROWSE INCDIR(.\include;.\sou
                    -rce;.\include) DEBUG PRINT(.\lst\gpio.lst) TABS(2) OBJECT(.\output\gpio.obj)

line level    source

   1          
   2          #ifndef _GPIO_C_
   3          #define _GPIO_C_
   4          /*********************************************************************************************************
             -************/
   5          #include "include/ca51f_config.h"   
   6          #include "include/ca51f2sfr.h"
   7          #include "include/ca51f2xsfr.h"
   8          #include "include/gpiodef_f2.h"
   9          #include "include/system_clock.h"
  10          
  11          #include "include/uart.h"
  12          #include "include/lcd_led.h"
  13          #include "include/delay.h"
  14          #include "include/lcd.h"
*** WARNING C318 IN LINE 14 OF source\gpio.c: can't open file 'include/lcd.h'
  15          #include "include/gpio.h"
  16          #include <intrins.h>
  17          /*********************************************************************************************************
             -************      
  18          
  19            P00F = OUTPUT;          //P00设置为推挽输出模式
  20            P00C |= 0x80;         //P00使能高灌电流模式
  21            
  22            P00F = INPUT|PU_EN;       //P00设置为输入模式并使能上拉电阻
  23            P00C |= 0x20;         //上拉电阻选择为强上拉
  24          //  P00C &= ~0x20;          //上拉电阻选择为弱上拉
  25          
  26            P00F = INPUT|PD_EN;       //P00设置为输入模式并使能下拉电阻
  27            P00C |= 0x10;         //下拉电阻选择为强下拉
  28          //  P00C &= ~0x10;          //下拉电阻选择为弱下拉
  29            
  30            P00F = P00_COM0_SETTING;    //P00设置为COM引脚功能
  31          
  32          **********************************************************************************************************
             -***********/  
  33          /*****************************************************************************
  34           ** \brief   GPIO_Init  
  35                 GPIO_Init初始化GPIO函数,比如按键开光输入输出
  36           ** \param   [in] none       
  37           ** \return   none
  38          *****************************************************************************/
  39          void GPIO_init(void)
  40          { 
  41   1      /*DCDC 开漏输出 P45 */
  42   1        P45F = OUTPUT|OP_EN;      //P45设置为开漏输出 
  43   1      //  P45C |= 0x20;         //上拉电阻选择为强上拉
  44   1      //  P45C &= ~0x20;          //上拉电阻选择为弱上拉  
  45   1        P45 = 0;            //P45输出置零 开启模组电源  
  46   1        
  47   1      /*充电检测。P46 充电插入检测，P47 充电状态检测*/
  48   1        P46F = INPUT|PU_EN;       //P46设置为输入模式并使能上拉电阻 
  49   1        P46C |= 0x20;         //上拉电阻选择为强上拉
  50   1      //  P46C &= ~0x20;          //上拉电阻选择为弱上拉  
C51 COMPILER V9.60.0.0   GPIO                                                              06/24/2023 15:11:54 PAGE 2   

  51   1        P47F = INPUT|PU_EN;       //P47设置为输入模式并使能上拉电阻 
  52   1      //  P47C |= 0x20;         //上拉电阻选择为强上拉
  53   1        P47C &= ~0x20;          //上拉电阻选择为弱上拉  
  54   1        
  55   1      /* 背光输出控制 P32*/ 
  56   1        P32F = OUTPUT;          //P32设置为推挽输出模式 
  57   1        P32  = 1;           //默认背光开启
  58   1      /* 蜂鸣器输出控制 P33 PWM*/ 
  59   1        P33F = P33_PWM6_SETTING;    //P33设置为PWM 输出模式
  60   1        P33  = 0;           //默认蜂鸣器关闭
  61   1        
  62   1        
  63   1        
  64   1        
  65   1      }
  66          
  67          /*****************************************************************************
  68           ** \brief   I2C_init 
  69                 I2C_init 温湿度接口初始化
  70           ** \param   [in] none       
  71           ** \return   none
  72          *****************************************************************************/
  73          void I2C_init(void)
  74          {
  75   1      /**********选择I2C端口************************************************************/
  76   1        I2CIOS = 0;
  77   1        P36F = P36_I2C_SDA_SETTING | PU_EN;
  78   1        P37F = P37_I2C_SCL_SETTING | PU_EN;   
  79   1      }
  80          
  81          /*****************************************************************************
  82           ** \brief   Zigbee_GPIO_init 
  83                 Zigbee_GPIO_init与模组管脚通讯pin脚
  84           ** \param   [in] none       
  85           ** \return   none
  86          *****************************************************************************/
  87          void Zigbee_GPIO_init(void)
  88          {
  89   1      /**********选择UART0端口************************************************************/
  90   1        #ifdef UART0_EN
                P31F = P31_UART0_RX_SETTING;
                P30F = P30_UART0_TX_SETTING;  
                #endif
  94   1      /*  P04 模组唤醒MCU P05  MCU唤醒模组  */
  95   1        P04F = INPUT;       //P04设置为输入模式
  96   1        P05F = OUTPUT|OP_EN;    //P05设置为开漏输出 
  97   1        P05  = 0;         //P05输出置零
  98   1      }
  99          
 100          
 101          
 102          #endif


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     82    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.60.0.0   GPIO                                                              06/24/2023 15:11:54 PAGE 3   

   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  1 WARNING(S),  0 ERROR(S)
